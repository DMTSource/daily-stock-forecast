<html><head><link rel="import" href="../polymer/polymer.html"><script>(function(){'use strict';function a(a,f){if(void 0===b){b=!1;try{var g=new URL('b','http://a');g.pathname='c%20d',b='http://a/c%20d'===g.href,b=b&&'http://www.google.com/?foo%20bar'===new URL('http://www.google.com/?foo bar').href}catch(a){}}return b?new URL(a,f):(c||(c=document.implementation.createHTMLDocument('url'),d=c.createElement('base'),c.head.appendChild(d),e=c.createElement('a')),d.href=f,e.href=a.replace(/ /g,'%20'),e)}var b,c,d,e;Polymer({is:'iron-location',properties:{path:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.pathname)}},query:{type:String,notify:!0,value:function(){return window.location.search.slice(1)}},hash:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.hash.slice(1))}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:''},encodeSpaceAsPlusInQuery:{type:Boolean,value:!1},_urlSpaceRegExp:{computed:'_makeRegExp(urlSpaceRegex)'},_lastChangedAt:{type:Number},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:['_updateUrl(path, query, hash)'],created:function(){this.__location=window.location},attached:function(){this.listen(window,'hashchange','_hashChanged'),this.listen(window,'location-changed','_urlChanged'),this.listen(window,'popstate','_urlChanged'),this.listen(document.body,'click','_globalOnClick'),this._lastChangedAt=window.performance.now()-(this.dwellTime-200),this._initialized=!0,this._urlChanged()},detached:function(){this.unlisten(window,'hashchange','_hashChanged'),this.unlisten(window,'location-changed','_urlChanged'),this.unlisten(window,'popstate','_urlChanged'),this.unlisten(document.body,'click','_globalOnClick'),this._initialized=!1},_hashChanged:function(){this.hash=window.decodeURIComponent(this.__location.hash.substring(1))},_urlChanged:function(){this._dontUpdateUrl=!0,this._hashChanged(),this.path=window.decodeURIComponent(this.__location.pathname),this.query=this.__location.search.substring(1),this._dontUpdateUrl=!1,this._updateUrl()},_getUrl:function(){var a=window.encodeURI(this.path).replace(/\#/g,'%23').replace(/\?/g,'%3F'),b='';this.query&&(b='?'+this.query.replace(/\#/g,'%23'),this.encodeSpaceAsPlusInQuery&&(b=b.replace(/\+/g,'%2B').replace(/ /g,'+').replace(/%20/g,'+')));var c='';return this.hash&&(c='#'+window.encodeURI(this.hash)),a+b+c},_updateUrl:function(){if(!this._dontUpdateUrl&&this._initialized&&(this.path!==window.decodeURIComponent(this.__location.pathname)||this.query!==this.__location.search.substring(1)||this.hash!==window.decodeURIComponent(this.__location.hash.substring(1)))){var b=this._getUrl(),c=a(b,this.__location.protocol+'//'+this.__location.host).href,d=window.performance.now(),e=this._lastChangedAt+this.dwellTime>d;this._lastChangedAt=d,e?window.history.replaceState({},'',c):window.history.pushState({},'',c),this.fire('location-changed',{},{node:window})}},_globalOnClick:function(a){if(!a.defaultPrevented){var b=this._getSameOriginLinkHref(a);b&&(a.preventDefault(),b===this.__location.href||(window.history.pushState({},'',b),this.fire('location-changed',{},{node:window})))}},_getSameOriginLinkHref:function(b){if(0!==b.button)return null;if(b.metaKey||b.ctrlKey)return null;for(var c,d=Polymer.dom(b).path,e=null,f=0;f<d.length;f++)if(c=d[f],'A'===c.tagName&&c.href){e=c;break}if(!e)return null;if('_blank'===e.target)return null;if(('_top'===e.target||'_parent'===e.target)&&window.top!==window)return null;if(e.download)return null;var g,h=e.href;g=null==document.baseURI?a(h):a(h,document.baseURI);var i=this.__location.origin?this.__location.origin:this.__location.protocol+'//'+this.__location.host;var j;if(g.origin)j=g.origin;else{var k=g.host,l=g.port,m=g.protocol;('https:'===m&&'443'===l||'http:'===m&&'80'===l)&&(k=g.hostname),j=m+'//'+k}if(j!==i)return null;var n=g.pathname+g.search+g.hash;if('/'!==n[0]&&(n='/'+n),this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(n))return null;var o=a(n,this.__location.href).href;return o},_makeRegExp:function(a){return RegExp(a)}})})();</script></head><body></body></html>